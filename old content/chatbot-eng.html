<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width-device-width,initial-scale=1.0">
        <title>Chat-bot</title>
        <script src = "https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <link rel="stylesheet" href="{{url_for('static',filename='css/style.css')}}">
    </head>

    <body>
      <button onclick="window.location.href='{{url_for('logout')}}';">Log out</button>
        <div class="container">
            <!--CHAT BOX-->
            <div class="chat-bot">
                <!--client-->
                <div class="client">
                    <img src="{{url_for('static',filename='img/Chatlogo.jfif')}}" width="50px" height="50px" alt='logo' />
                    <div class="client-info">
                        <h2>English Chatbot</h2>
                        <p>Online</p>
                    </div>
                </div>
                <!--main chat section
                <div class="chats">
                    <div id="chats">
                    </div>
                </div> -->
                <!--input field section-->
                <!--
                <div class="chat-input">
                <div id = "userInput">
                    <div class="input-group mb-3">
                      <input class="form-control" id ="textInput" type ="text" name="userText" placeholder="Message" aria-describedby="buttonInput">
                      <input class="send-btn" id = "buttonInput" type = "submit" value="Send" />
                    </div>
                  </div>
                 </div> 
                 -->
                 <div class="chats">
                  <div id = "chatbox">
                  </div>
                 </div>
                 <div id = "userInput">
                  <div class="chat-input">
                    
                        <input id ="textInput" type ="text" name="userText" placeholder="Message" aria-describedby="buttonInput">
                        <div class="send-btn">
                          <img src="{{url_for('static',filename='img/send.jfif')}}" alt="sendbtn" id="buttonInput">
                        </div>
                        <!--<input id = "buttonInput" type="submit" value="Send" class="send-btn">-->
                      <script>
                        function getBotResponse1(){
                          var rawText = $("#textInput").val();
                          var userHtml = '<br><div class="my-chat">' + rawText + '</div>';
                          $("#textInput").val("");
                          $("#chatbox").append(userHtml);
                          
                          document.getElementById('userInput').scrollIntoView({block:'start',behaviour:'smooth'});

                          $.get("/opt/chatbot-eng/get", {msg:rawText }).done(function(data) {
                            var botHtml = '<br><div class="client-chat">' + data + '</div>';
                            $("#chatbox").append(botHtml);
                            console.log(rawText,data);
                            document.getElementById('userInput').scrollIntoView({block : 'start',behaviour:'smooth'});
                          });
                        
                          }
                          $("#textInput").keypress(function(e) {
                            if(e.which == 13) {
                            getBotResponse1();
                            }
                          });
                          $("#buttonInput").click(function() {
                            getBotResponse1();
                        })
                        </script>
                    </div> 
                 </div>
            </div>
        </div>
        
    </body>
</html>